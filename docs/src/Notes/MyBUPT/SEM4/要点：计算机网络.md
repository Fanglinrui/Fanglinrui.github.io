---
tags:
  - 应用层
  - 传输层
  - 网络层
  - 数据链路层
  - LAN
  - 物理层
联动:
updateTime: 2025-04-11 16:36
---
# 1 第一次作业&综述  
## 1.1要点
* 时延：
	* 发送时延：发送第一个比特到最后一个比特发送完毕的时间  
		* 发送时延=数据块长度/信道带宽  
	* 传播时延：在信道上的时间  
		* 传播时延=信道长度/信道速度 
	* 转发时延：除首位外的节点数 * 一个分组的发送时延
	* 还有处理时延和排队时延
	* 总时延=发送时延+传播时延+处理时延+排队时延
* 吞吐量：瓶颈链路（最慢的那条线路）的速度
* 模型：
	* OSI参考模型：应用层、表示层、会话层、传输层、网络层、数据链路层、物理层
	* TCP/IP模型：应用层、传输层、网际层、网络接口层  
	* 混合模型：应用层、传输层、网路层、数据链路层、物理层
* 协议、服务：
	* 协议是水平的
	* 服务是垂直的
## 1.2作业相关  
* 长度相关，以2为底  
* 速度相关，以10为底
* 毫秒是10的负3，微秒是10的负6  
* 网络协议三要素：语法、语义、时序(同步)
* 计算方面见[[#1.1要点]]  
* ADSL和线缆Modem的相同点和不同点  
	* 相同点：都在模拟信道上，都是用频分多路复用技术（FDM），上行速率和下行速率不同
	* 不同点：运营商不同；传输介质不同；ADSL中，用户到交换机独占电缆，而Modem中，多家共享一条同轴电缆。  
# 2 第二次作业&应用层  
## 2.1要点  
* DNS
	* 根、顶级域TLD、二级域
	* 端口号是53  
	* DNS服务器：根域名服务器、顶级域名服务器、权威域名服务器、本地域名服务器
	* 查询方式：
		* 迭代查询：五角星
		* 递归查询：一字长蛇
	* 资源记录：A、NS、CNAME、MX
* RTT：Round Trip Time，往返时间
* HTTP：
	* 端口：80
	* 响应时间=2 x RTT + 发送时延  
* FTP：
	* 端口：21
	* 控制连接，数据连接  
## 2.2 作业相关  
* 吞吐量u Bps，N个客户，文件F字节
	* p2p：r轮后，时间过了r x F/u，共N+1份文件，此时 2^r = N+1
* 网页出现在屏幕上，代表除了TCP握手外，还有一次数据传输！网页的数据传输！  
* 域和区：
	* 域是DNS名字空间中的一棵子树，包含下面的全部子树  
	* 区是按照名字管理划分，一个区对应一个名字数据库
	* 有多种对应关系
* HTTP流水线持久连接中，HTML文件和其它小件得分开，等于一次传HTML，一次传剩下的其它小件  
* base64编码：会扩展大小，把原文件按照6bit进行划分，扩展为8bit。  
# 3 第三次作业&传输层  
## 3.1 要点：
* 端口号：
	* 熟知端口：一般小于1024
* 校验和：
	* 数据报按2字节为一组分多组，最后一组不足16位补0
	* 伪报头也要参与校验和的计算
	* 各组对应位相加
	* 最高位进位累加到最低位  
	* 结果取反码
* UDP：
	* 报头固定为8字节
		* 有一个点，数据报长度，其为**报头+数据**  
		* 校验和，见上
* TCP：
	* 报头长度可变
	* 拥塞控制机制见[[面向连接的传输：TCP#8.2 TCP拥塞控制算法]]  
## 3.2 作业相关：  
* 数据传输差错：被损坏、丢失、乱序、重复
	* 可能的原因：接收方缓存不足、路由器缓存不足、目的地址被损坏  
* GBN：采用累积ACK，且ACK表明的是下一个要接收的序号  
* 伪报头：12字节，只在校验时使用，不进行传输；TCP和UDP均使用；目的是增强对IP地址传输正确性的验证
* 消息序列图：
![[计算机网络总结.png]]  
* 注意了，都是大窗口的情况下，接收方和发送方的窗口大小一般是相同的。  
* 时延相关：  
	* [[#1.1要点]]  
	* α=传播时延$T_p$/发送时延$T_t$
	* 信道利用率： U= $T_t$/$T_总$ =窗口大小/（两种情况）
		* 第一种情况：有ACK，那么 1+2α
		* 第二种情况：携带确认，那么 2+2α
* RTT估值：大的历史值+小的本次测量值  
* 窗口相关：
	* 发送窗口会被接收窗口限制！
# 4 第四次作业&网络层  
## 4.1 要点  
* 网络层是端到端（主机-主机）的数据传输  
* 虚电路网络仍然采用的是分组交换，其在建立的时候也需要完整的数据，但在其后的分组中只需要处理较短的VCI  
* 路由选择中的多种算法：  
	* 静态选路算法：Dijkstra算法  
	* 动态选路算法：DVR（距离矢量选路算法） 
		* 周期性与邻居节点交换路由表中的距离项（目的地、距离）
		* 分别用到邻居节点的已知距离加上它们到目的节点的距离，然后比大小即可  
		* 更新完的路由表三列：目的地、下一跳、距离  
		* 参见[[4网络层.pdf#page=56&selection=0,0,1,7|DVR]]  
	* 动态选路算法：LSR（链路状态选路算法）  
		* 网络初启或链路状态变化时与**网络中的所有节点**交换一个节点到各**邻居节点的链路开销**，以构造出全网的拓扑结构  
		* LSP包结构：源、序号、年龄、到邻接节点的开销  
* IP分配：DHCP ；C/S，S:67 C:68; UDP  
* IP包：  
	* 包头4位，单位4字节  
	* 包总长度2字节，单位1字节  
	* 分段偏移量，13位，单位**8字节**  
* 路由选择协议：RIP(UDP520) 、OSPF(IP) 、BGP(TCP179)  
	* RIP, OSPF是内部网关协议；BGP-4是外部网关协议  
	* RIP: DVR  
	* OSPF: LSR  
	* BGP: 路径矢量选路算法    
	* [[4网络层.pdf#page=150&selection=0,0,0,8|参考这个表]]  
* 组播：IP地址开头 1110  
	* IGMP：在IP包中，协议位为2  
## 4.2 作业相关  
* 划分子网相关：  
	* 划分相同的子网：按照2的幂次，次数增加子网掩码的大小  
	* 完全分完子网：就像分西瓜，切一半，对其中一半再对分，依次每次取一半作主机分配，另一半作下一次划分  
	* 主机数目：比如，2^8=128, 那么只需要8-1=7位主机号，因为全0也算一个，它是0-127  
	* 划分时，上一个是大网（主机多），下一个IP可以紧接着上一个的广播；相反，上一个是小网，下一个IP要根据掩码取新的  
	* 广播地址就是取主机全1，而不是主机最后一个  
* 计算转发，用掩码 与上 目的IP地址，得到网络地址，看跟哪个网络匹配（可能有多个），然后根据最长前缀匹配  
* 分段，一个看偏移量：能否被8整除，同时偏移量就是上一个段的数据除以8；还有MF=0是最后一个；DF=1表示不分段  
# 第5次作业&数据链路层
## 5.1 要点（数据链路层）  
* 数据链路层提供可靠传输  
* 数据链路层提供相邻节点之间的数据传输  
* TCP/IP对数据链路层和物理层没规定，一起称为网络接口层  
* 成帧方法：  
	* 字符计数法：每一帧增加一个字符，内容为包含这个头所在内的总字节数  
	* 字符填充法：SOH，EOT，DLE  
	* 零比特填充法（应用于HDLC协议），首尾均填充01111110，帧中连续5个1时，插入一个0  
	* 物理层编码违例法：利用曼彻斯特编码中无跳变的码元表示开始结束——无填充  
* 差错检测之奇偶校验：  
	* 末尾添加一位数，根据提前约定的奇校验/偶校验，0表示前面有奇数/偶数个1（这里是一一对应）  
* 差错检测之循环冗余校验：  
	* 首先选定生成多项式，根据最高阶在待校验数据后添加对应阶数个0  
	* 模2除法，不进位，不借位  
	* 发送的数据：待校验数据加上校验码  
* 差错纠正：ARQ/纠错码  
* 数据链路层的物理地址，MAC，由IP地址经过地址解析协议（ARP）转化而来  
	* 发送时，广播ARP请求，目的节点单播ARP响应给源节点  
## 5.2 作业相关  
* ARP过程：源主机选路（目的是确定IP地址是路由IP还是目的IP）、ARP请求/响应  
* PPP协议：拨号上网  
	* NCP：网络层参数  
	* LCP：数据链路层参数  
# 第6次作业&局域网、物理层  
## 6.1 要点（局域网）  
* LAN包括两个层次：数据链路层、物理层  
	* 其中，数据链路层又可以分为：逻辑链路控制(LLC)、介质访问控制(MAC)  
	* 各个LAN的LLC相同，差别在于MAC和物理层  
* MAC帧的特殊点：目的在前，源在后；其他的所有都是先源后目的  
* 以太网：无连接、不确认  
	* CSMA/CD：载波监听多点接入/冲突检测  
		* 发前先听，空闲即发送；边发边听，冲突时退避  
		* 争用期（冲突窗口）的计算方法：两倍端到端往返时延  
			* 进而算出最短帧长：争用期乘以网速  
		* 退避：阶段二进制指数算法  
			* 十六次尝试重传，每次随机选r（从[0,1]开始，下一次是[0,1,2,3]  
			* [[6LAN.pdf#page=26&selection=0,0,0,8|例子在这]]  
	* 空闲后等IFG再发  
	* [[6LAN.pdf#page=28&selection=0,0,0,7|以太网帧格式]]  
* WLAN：  
	* 隐蔽站和暴露站：  
		* 隐蔽站：不能检测出介质上已存在的信号  
		* 暴露站：CSMA误判  
	* CSMA/CA (Detect->Avoidance)：无连接，有确认  
		* 机制：  
			* 预约信道， 发送站点通告占用   
			* ACK，接收站点确认  
			* 握手：RTS/CTS，解决隐蔽站  
		* IFS: SIFS, DIFS  
			* DIFS: 空闲后等的间隔(RTS、数据帧)  
			* SIFS: 分隔开两帧的(ACK、CTS、非第一帧)  
		* 虚拟载波监听：站点并没有监听，是收到源站的占用通知  
* 数据链路层互联设备  
	* 集线器(HUB)，冲突域=广播域  
	* 网桥：分隔冲突域，扩大了物理范围  
		* 收到一帧，先逆向学习  
		* 然后转发，洪范/对应端口/丢弃  
	* 交换机：所有计算机同处一个广播域，每个端口一个冲突域  
# 6.2 要点（物理层）  
* 最大数据率公式(说1不2)  
	* 奈奎斯特公式：用于无噪声信道  
		* $C = 2 \times B \times \log _2L$  
		* C: 最大数据率，bps  
		* B: 带宽， HZ  
		* L: 信号级数，形如L-QAM  
	* 香农公式：用于噪声信道  
		* $C = B \times \log _2(1+\frac{S}{N})$  
		* S/N: 信噪比  
		* 单位为分贝，$dB值=10\times \lg(S/N)$  
		* 即$\frac{S}{N}=10^{\frac{dB}{10}}$  
## 6.3 作业相关  
* ![[计算机网络作业及每章要点总结-1.png]]
* 红色：目的MAC，源MAC，帧内数据类型  
* 绿色：包头长度(4B)，传输层协议，源IP，目的IP  
* 蓝色：源端口，目的端口  
* 黑色：ACK/SYN相关位  
# 第7部分 一些其他的补充  
- 传输层提供了进程-进程通信  
- 网络层提供了主机-主机通信  
- 数据链路层提供了相邻节点之间的通信  
- 物理层，实际通信  
- ![[要点：计算机网络.png]]