---
tags:
  - 数据库
  - 关系数据理论
  - 规范化
参考1: "[[6.1 关系数据理论.pdf]]"
参考2: "[[6.2 关系数据理论.pdf]]"
updateTime: 2025-04-11 16:48
---
# 第1部分 背景  
* 考虑这样一个关系： sct(<u>sno, cno, tno</u>,sname,grade,cname,tname)  
	* 问题：冗余度高、修改困难、插入问题、删除问题  
	* 因此要**分解关系** ——如何规范化分解出好的关系？
* 依据：  
	* 数据依赖：函数依赖、多值依赖  
	* 范式（NF）
# 第2部分 术语  
##  2.1 关系模式：简化三元组——R(U,F)  
* R：关系名  
* U：组成该关系的属性名集合  
* F：属性间数据的依赖关系集合  
* 完全态：R(U, D, DOM, F)  
	* D：属性组U中属性所来自的域  
	* DOM：属性向域的映象集合  
## 2.2 依赖：  
* 一个方便理解的例子：  
	* 关系模式 Student<U、F>  
	* $U = \{ Sno, Sdept,Sloc,Cno,Grade \}$  
	* $F = \{ Sno \to Sdept,Sdept \to Sloc, (Sno,Cno) \to Grade \}$  
	*   ![[规范化数据模式.png]]  
* 函数依赖：  一个元组对(x,y), X属性上的值x确定时，Y属性的值y随之唯一确定
	* 同义：X函数确定Y，Y函数依赖于X  
	* 记作：$X \to Y$   
		* X称为这个函数依赖的**决定属性组**，或决定因素  
		* 若$X\to Y,Y\to X$ 则$X\gets \to Y$ 
		* 否定形式：$X \nrightarrow Y$  (改成斜杠向右)  
	* 非平凡函数依赖：$X \to Y ,Y \nsubseteq X$  例：$(Sno,Cno) \to Grade$  
	* 平凡函数依赖：$X \to Y,Y \subseteq Y$ 例：$(Sno,Cno) \to Sno$  
* 部分函数依赖：$(Sno,Cno)\stackrel{F}{\longrightarrow}Sdept$  
* 完全函数依赖：$(Sno,Cno)\stackrel{P}{\longrightarrow}Grade$  
* 传递依赖：$Sno \to Sdept, Sdept \to Sloc$ ，有Sloc传递函数依赖于Sno
* 多值依赖：
	* Z=U-X-Y, 对于R(U)的任一关系r，给定的一对(x,z)值，有**一组**Y的值，这组值仅仅决定于x值而与z值无关，就说多值依赖 $X \to \to Y$成立  
	* 性质：对称性、传递性、函数依赖时多值依赖的特殊情况等 （见下图）  
	* ![[规范化数据模式-1.png]]
## 2.3码：  
* 候选码：唯一化标识一整个属性元组的属性或属性组合，称为候选码  
	* 更正式的表述：设 K 为 R<U,F>中的属性或属性组合，若 $K\stackrel{F}{\longrightarrow}U$ ，则称K为R的**候选码**  
	* **码的真子集不是码**  
* 主码：候选码多于一个，选其中一个为主码  
* 全码：整个属性组是码，称全码  
* 主属性/非主属性：  
	* 包含在任何一个**候选码**中的属性，称为主属性  
	* 反之则为非主属性/非码属性
## 2.4 范式：  
* 有联系：$1NF \supset 2NF \supset 3NF \supset BCNF \supset 4NF \supset 5NF$   
	* 数字越大，等级越高  
	* 高级是推导低级的充分不必要条件  
	* 一个低一级范式的关系模式，通过模式分解可以转化为若干高一级范式的关系模式的集合，这个过程为**规范化**
* 1NF：所有属性都是**不可分的基本数据项**  
	* 超长关系模式  
	* 一大坨
* 2NF：消除 **部分依赖**，使每一个非主属性完全函数依赖于码
* 3NF：消除 **传递依赖**，每一个非主属性既不部分依赖于码也不 传递依赖于码  
* BCNF：在低级范式中$X \to Y$中的X不一定是码，但是这里**每一个决定属性因素都包含码**  
* 4NF：R<U, F>的每个非平凡多值依赖$X \to \to Y$ ，X都含有码  
	* 如果$R \in 4NF$ ,则$R \in BCNF$  
	* 也就是说，非平凡多值依赖的X得是码，不然没得谈  
# 第3部分 流
 1. 首先要通过语义把属性之间的**函数依赖关系**列出来  
 2. 然后确定哪些属性组合可以候选码，从而找出**非主属性和主属性**  
 3. 然后判断是否存在非主属性与码之间的**部分函数依赖关系**，如果 存在，则不满足2NF，如不存在部分函数依赖，则属于2NF  
 4. 继续进行下一步判断；判断非主属性与码之间存在**传递依赖关系**， 不存在，则为3NF  
 5. **决定因素是否包含码**，满足条件则为BCNF  
# 第4部分 总结  
* 目的：尽量消除  
	* 插入、删除异常  
	* 修改复杂  
	* 数据冗余  
* 基本步骤：  
![[规范化数据模式-2.png]]  
