---
tags:
  - CAP模型
  - Redis
updateTime: 2025-04-11 16:48
---


**用现实例子理解CAP理论：**

1. **CAP三角**（分布式系统必须三选二）：

- **C**onsistency（一致性）：所有节点数据**实时一致**  
    （如银行转账，A账户扣款成功，B账户必须立刻到账）
- **A**vailability（可用性）：**任何请求都有响应**  
    （双十一淘宝必须能正常下单，即使显示"预计2秒到账"）
- **P**artition tolerance（分区容错性）：**网络断连时系统仍能工作**  
    （比如跨国服务器之间光缆断了，中美节点还能独立运行）

1. **AP模型**（优先保可用性+容错性，弱化一致性）：

- **典型场景**：
    - 微信发送消息（允许偶尔显示"发送中"，但消息最终必达）
    - 电商购物车（高峰期允许不同页面显示不同库存数量，但保证能下单）
- **工作原理**：  
    当网络故障时，系统会：  
    ① 继续响应请求（比如先让用户加购商品）  
    ② 暂时允许数据不一致（北京服务器显示库存10件，上海服务器显示8件）  
    ③ 网络恢复后自动同步数据（最终库存变为2件）

**对比其他选择**：

- **CP模型**（银行系统）：宁可暂时拒绝交易，也要保证转账金额绝对一致
- **CA模型**（几乎不存在）：现实中网络总会出问题，P是必选项

**AP系统典型代表**：Cassandra、DynamoDB（适合社交网络、物联网等场景）
